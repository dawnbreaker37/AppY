@model User
@{
    ViewData["Title"] = "Page";
    User? UserInfo = ViewBag.UserInfo;
}

<div class="main-sidebar" id="Main_SideBar">
    <div class="d-none">
        <input type="hidden" id="AvatarSticker_Hdn_Val" value="@UserInfo.AvatarStickerUrl" />
    </div>
</div>

<div class="main-container mh-max shadow-standard" id="Preloaded_Container">
    <div class="header-container p-2 text-center" id="Preloaded_Container-Header">
        <button type="button" class="btn btn-close rounded-circle float-end ms-1" id="Preloaded_Container-Close" aria-label="close"></button>
        <h5 class="h5 text-truncate p-1">@UserInfo.PseudoName's Page</h5>
    </div>
    <div class="box-container p-2 pt-1 mt-1" id="Prealoded_Container-Box">
        <div class="box-container bg-light p-3 text-center">
            @if(UserInfo.AvatarUrl == null)
            {
                <div class="image-picture-none-container text-center mx-auto" style="background-color: #@UserInfo.AvatarBgColor;">
                    <div class="unpictured-container-label" style="color: #@UserInfo.AvatarFgColor" id="UnpicturedAvatar_Lbl"> @UserInfo.UnpicturedAvatarInfo</div>
                </div>
                <span class="h2" id="UserInfo_Pseudoname_Lbl">@UserInfo.PseudoName</span>
                <div></div>
                <small class="card-text text-muted" id="DiscussionStatusBar_Lbl"><span class="status-slider" id="StatusBar_Lbl-0">@@@UserInfo.ShortName</span><span class="status-slider" id="StatusBar_Lbl-1" style="display: none;">@UserInfo.LastSeenText</span><span class="status-slider" id="StatusBar_Lbl-2" style="display: none;">member in @ViewBag.DiscussionsCount discussions</span></small>
            }
            else
            {
                <div class="image-container text-center mx-auto">
                    <img class="image-container" src="/Avatars/@UserInfo.AvatarUrl" />
                </div>
                <span class="h2" id="UserInfo_Pseudoname_Lbl">@UserInfo.PseudoName</span>
                <div></div>
                <small class="card-text text-muted" id="DiscussionStatusBar_Lbl"><span class="status-slider" id="StatusBar_Lbl-0">@@@UserInfo.ShortName</span><span class="status-slider" id="StatusBar_Lbl-1" style="display: none;">@UserInfo.LastSeenText</span><span class="status-slider" id="StatusBar_Lbl-2" style="display: none;">member in @ViewBag.DiscussionsCount discussions</span></small>
            }
        </div>
        <div class="box-container bg-light mt-1 p-2">
            <h6 class="h6 text-muted">Bio</h6>
            @if(UserInfo.Description != null)
            {
                <p class="card-text white-space-on message-label">@UserInfo.Description</p>
            }
            else
            {
                <p class="card-text white-space-on message-label">No bio</p>
            }
        </div>
        <div class="box-container mt-1">
            <div class="row">
                <div class="col">
                    <div>
                        @if(ViewBag.DiscussionsCount > 0)
                        {
                            <div>
                                <form method="get" asp-controller="Discussion" asp-action="GetOtherUsersDiscussions" id="GetOtherUsersDiscussions_Form">
                                    <input type="hidden" name="Id" value="@UserInfo.Id" />
                                    <input type="hidden" name="UserId" value="@ViewBag.CurrentUserId" />
                                    <button type="submit" class="btn btn-standard-asset btn-light w-100" id="GetOtherUsersDiscussionsSbmt_Btn"> <i class="fa-solid fa-quote-right text-primary"></i> <br />Discussions, @ViewBag.DiscussionsCount</button>
                                </form>
                            </div>
                        }
                        else
                        {
                            <button type="button" class="btn btn-standard-asset btn-light w-100" disabled> <i class="fa-solid fa-quote-right text-primary"></i> <br /> No Discussions</button>
                        }
                    </div>
                </div>
                <div class="col">
                    <div>
                            <a asp-controller="Chat" asp-action="C" asp-route-Id="@ViewBag.ChatId" class="btn btn-standard-asset btn-light w-100" disabled> <i class="fa-regular fa-comments text-primary"></i> <br />Chat</a>
                    </div>
                </div>
                <div class="col">
                    <div>
                        <button type="button" class="btn btn-standard-asset btn-light w-100 btn-slide-to-right" id="AdditionalInfo_Container-Open"> <i class="fa-solid fa-ellipsis text-primary"></i> <br />More</button>
                    </div>
                </div>
            </div>
            <div class="row mt-1">
                <a asp-controller="Chat" asp-action="CreateSecretChat" asp-route-Id="@UserInfo.Id" class="btn btn-standard-asset btn-light w-100"> <i class="fa-solid fa-user-secret text-primary"></i> Secret Chat</a>
            </div>
        </div>

        <div class="bordered-container mt-2 p-2" style="display: none; margin-left: -1200px;" id="AdditionalInfo_Container">
            <h5 class="h5">Additional Info</h5>
            <div class="border-top mt-2 pt-2">
                <div>
                    <span class="card-text fw-500 fs-6">Joined at</span>
                    <div></div>
                    <small class="card-text text-muted">@UserInfo.CreatedAt.ToShortDateString()</small>
                </div>
            </div>
            <div class="border-top mt-2 pt-2">
                <div>
                    <span class="card-text fw-500 fs-6">Pseudoname</span>
                    <div></div>
                    <small class="card-text text-muted">@UserInfo.PseudoName</small>
                </div>
            </div>
            <div class="border-top mt-2 pt-2">
                <div>
                    <div class="ms-1 float-end">
                        <button type="button" class="btn btn-standard-asset btn-light text-primary btn-sm copy-to-clipboard" id="UserShortnameToCopy_Lbl-Copy"> <i class="fa-regular fa-copy"></i> Copy</button>
                    </div>
                    <span class="card-text fw-500 fs-6">Shortname (@@)</span>
                    <div></div>
                    <small class="card-text text-muted" id="UserShortnameToCopy_Lbl">@@@UserInfo.ShortName</small>
                </div>
            </div>
            <div class="border-top mt-2 pt-2">
                <div>
                    <span class="card-text fw-500 fs-6">Member in</span>
                    <div></div>
                    <small class="card-text text-muted">@ViewBag.DiscussionsCount discussion(s)</small>
                </div>
            </div>
            <div class="border-top mt-2 pt-2 text-center">
                <button type="button" class="btn btn-standard btn-sm btn-slide-to-left w-100" id="AdditionalInfo_Container-Close">Close</button>
            </div>
        </div>
        <div class="bordered-container p-2 mt-2" style="display: none; margin-left: -1200px;" id="Discussions_Container">
            <span class="h6">Discussions ∙ <span id="DiscussionsCount_Span">@ViewBag.DiscussionsCount</span></span>
            <div></div>
            <small class="card-text text-muted">all discussions where @UserInfo.PseudoName insists in <span id="SameDiscussionsCount_Span" style="display: none"></span></small>
            <div class="border-top mt-2 pt-2" id="DiscussionsInfo_Box">
            </div>
            <div class="border-top mt-2 pt-1" style="display: none;" id="SameDiscussionsInfo_Box">

            </div>
        </div>
    </div>
</div>
